"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{2424:function(e,n,r){var s=r(8057);n.Z=function(e,n){return 0===Object.keys(n).length?e:[e,Object.entries(n).filter((function(e){var n=(0,s.Z)(e,2);n[0];return n[1]})).map((function(e){var n=(0,s.Z)(e,2),r=n[0],a=n[1];return"".concat(r,"=").concat(a)})).join("&")].join("?")}},2964:function(e,n,r){var s=r(8961),a=r(1527),t=r(343),i=function(e){var n=e.message,r=e.type,s=e.Icon;return(0,a.jsx)("div",{className:"alert alert-".concat(r," shadow-lg"),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(s,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:n})]})})},l={Error:function(e){return(0,a.jsx)(i,(0,s.Z)({type:"error",Icon:t.$Vt},e))},Warning:function(e){return(0,a.jsx)(i,(0,s.Z)({type:"warning",Icon:t.G5O},e))},Info:function(e){return(0,a.jsx)(i,(0,s.Z)({type:"info",Icon:t.h5X},e))},Success:function(e){return(0,a.jsx)(i,(0,s.Z)({type:"success",Icon:t.Mk_},e))}};n.Z=l},5744:function(e,n,r){var s=r(1527),a={Pulse:function(e){var n=e.children,r=e.className;return(0,s.jsx)("div",{className:t(r,"animate-pulse"),children:n})},Line:function(e){var n=e.className;return(0,s.jsx)("div",{className:t(n,"h-2 bg-slate-700 rounded")})},Square:function(e){var n=e.className;return(0,s.jsx)("div",{className:t(n,"bg-slate-700 rounded")})},Circle:function(e){var n=e.className;return(0,s.jsx)("div",{className:t(n,"bg-slate-700 rounded-full")})}};function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.filter(Boolean).join(" ")}n.Z=a},6750:function(e,n,r){r.d(n,{Z:function(){return F}});var s=r(8961),a=r(1527),t=r(9461),i=r(5744),l=r(3693),c=r(7637),o=function(e){var n=e.rates,r=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return s<=0?n:r(e-20,(0,l.Z)(n).concat([Math.min(20,e)]),s-1)};return(0,a.jsxs)("div",{className:"inline-flex items-center text-amber-400",children:[r(n).map((function(e,n){return e>=20?(0,a.jsx)(c.M2b,{},n):e>=10?(0,a.jsx)(c.bSE,{},n):(0,a.jsx)(c.OTA,{},n)})),(0,a.jsx)("span",{className:"text-base ml-2",children:Math.min(Math.max(0,n/10),10).toFixed(1)})]})},d=r(2379),u=r.n(d),x=r(9493),m=r.n(x),h=Object.assign((function(e){var n=e.title,r=e.cover,s=e.author,t=e.id;return(0,a.jsxs)("div",{className:"relative flex flex-col w-28",children:[(0,a.jsx)("figure",{className:"flex justify-center items-center",children:(0,a.jsx)(m(),{href:"/books/".concat(t),children:(0,a.jsx)("a",{className:"relative w-28 h-[calc(7rem/2*3)]",children:(0,a.jsx)(u(),{src:r,layout:"fill",alt:n})})})}),(0,a.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,a.jsx)(m(),{href:"/books/".concat(t),children:(0,a.jsx)("a",{className:"link no-underline text-primary hover:bg-primary hover:text-primary-content focus:bg-primary-focus focus:text-primary-content",children:(0,a.jsx)("h2",{className:"truncate",children:n})})}),(0,a.jsx)("p",{className:"truncate",children:s})]})]})}),{Skeleton:function(){return(0,a.jsxs)(i.Z.Pulse,{className:"relative flex flex-col mb-4 w-28",children:[(0,a.jsx)(i.Z.Square,{className:"mb-2 w-28 h-[calc(7rem/2*3)]"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-24"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-20"})]})}}),f=Object.assign((function(e){var n=e.title,r=e.cover,s=e.author,t=e.id,i=e.description,l=e.rates;return(0,a.jsxs)("div",{className:"flex py-4 gap-3",children:[(0,a.jsx)("figure",{className:"flex justify-center items-center",children:(0,a.jsx)(m(),{href:"/books/".concat(t),children:(0,a.jsx)("a",{className:"relative w-28 h-[calc(7rem/2*3)]",children:(0,a.jsx)(u(),{src:r,layout:"fill",alt:n})})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 h-[calc(7rem/2*3)]",children:[(0,a.jsx)("div",{className:"inline-flex justify-start",children:(0,a.jsx)(m(),{href:"/books/".concat(t),children:(0,a.jsx)("a",{className:"link no-underline text-primary hover:bg-primary hover:text-primary-content focus:bg-primary-focus focus:text-primary-content",children:(0,a.jsx)("h2",{className:"truncate",children:n})})})}),(0,a.jsx)("p",{className:"truncate",children:s}),(0,a.jsx)(o,{rates:l}),(0,a.jsx)("p",{className:"line-clamp-3 text-ellipsis",children:i})]})]})}),{Skeleton:function(){return(0,a.jsxs)(i.Z.Pulse,{className:"relative flex mb-4 w-full gap-3",children:[(0,a.jsx)(i.Z.Square,{className:"mb-2 w-28 h-[calc(7rem/2*3)]"}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,a.jsx)(i.Z.Line,{className:"mb-2 w-1/5"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-1/6"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z.Line,{className:"mb-2 w-4/5"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-4/5"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-4/5"}),(0,a.jsx)(i.Z.Line,{className:"mb-2 w-4/6"})]})]})]})}}),j=h,v=r(2964),g=r(1284),b=function(e){var n=e.length,r=e.setIndex,s=e.index,t=function(e){r(Number(e.currentTarget.value))};return n>1?(0,a.jsxs)("div",{className:"btn-group mx-auto",children:[(0,a.jsx)("button",{className:"btn btn-xs",onClick:function(){return r((function(){return Math.max(0,s-1)}))},children:(0,a.jsx)(g._HF,{})}),Array.from({length:n},(function(e,n){return(0,a.jsx)("button",{className:"btn btn-xs"+(s===n?" btn-active":""),onClick:t,value:n,children:n+1},n)})),(0,a.jsx)("button",{className:"btn btn-xs",onClick:function(){return r((function(){return Math.min(n-1,s+1)}))},children:(0,a.jsx)(g.PS5,{})})]}):(0,a.jsx)(a.Fragment,{})},N=r(2424),p=r(3953),w=r(6747);var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,N.Z)("/books",e),a=(0,w.ZP)(r,n),i=a.data,l=a.error,c=(0,t.Z)(a,["data","error"]);return(0,s.Z)({books:i,isLoading:!l&&!i,isError:l},c)},y=r(959),k=function(e){var n=e.maxPages,r=void 0===n?1:n,i=e.page,l=(0,t.Z)(e,["maxPages","page"]),c=(0,y.useState)(0),o=c[0],d=c[1],u=(0,s.Z)({page:null!==i&&void 0!==i?i:1+o},l),x=Z(u),m=x.books,h=x.isError,f=x.isLoading;return Z((0,s.Z)({page:u.page+(o<r-1?1:0)},l)),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-6 my-8 w-full",children:[h&&(0,a.jsx)(v.Z.Error,{message:"Network Error!"}),f?Array.from({length:10},(function(e,n){return(0,a.jsx)(j.Skeleton,{},n)})):null===m||void 0===m?void 0:m.map((function(e,n){return(0,a.jsx)(j,(0,s.Z)({},e),n)}))]}),(0,a.jsx)(b,{length:r,index:o,setIndex:d})]})},L=r(8057);var E=function(e){var n=(0,y.useState)(!1),r=n[0],s=n[1];return(0,y.useEffect)((function(){var n=new IntersectionObserver((function(e){var n=(0,L.Z)(e,1)[0];s(n.isIntersecting)}));return e.current&&n.observe(e.current),function(){return n.disconnect()}}),[e]),r},I=function(e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.page,a=void 0===r?1:r,i=(0,t.Z)(e,["page"]),l=(0,p.ZP)((function(e,n){return n&&!n.length?null:(0,N.Z)("/books",(0,s.Z)({page:e+a},i))}),n),c=l.data,o=l.error,d=(0,t.Z)(l,["data","error"]);return(0,s.Z)({data:c,isLoading:!o&&!c,isError:o},d)}(e),r=n.data,i=n.size,l=n.setSize,c=(0,t.Z)(n,["data","size","setSize"]),o=(0,y.useRef)(null),d=E(o);return(0,y.useEffect)((function(){d&&!c.isValidating&&i<10&&l(i+1)}),[d,c,i,l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[c.isError&&(0,a.jsx)(v.Z.Error,{message:"Network Error!"}),c.isLoading?Array.from({length:10},(function(e,n){return(0,a.jsx)(f.Skeleton,{},n)})):(0,a.jsx)("div",{children:null===r||void 0===r?void 0:r.map((function(e,n){return e.map((function(e,r){return(0,a.jsx)(f,(0,s.Z)({},e),"".concat(n,"-").concat(r))}))}))})]}),(0,a.jsx)("div",{ref:o})]})},S=function(e){var n=e.children;return(0,a.jsx)("h1",{className:"text-2xl w-full py-2",children:n})},P={BookGrid:k,BookList:I},F=Object.assign((function(e){var n=e.title,r=e.children;return(0,a.jsxs)("div",{className:"flex flex-col",children:[n&&(0,a.jsx)(S,{children:n}),r]})}),(0,s.Z)({SubBox:function(e){var n=e.title,r=e.children;return(0,a.jsxs)("div",{className:"flex flex-col items-start my-2",children:[n&&(0,a.jsx)("h2",{className:"text-lg capitalize w-full my-2",children:n}),r]})},Header:S,Pagination:b},P))},4203:function(e,n,r){r.d(n,{H:function(){return O}});var s=r(1527),a=r(5967),t=r(9493),i=r.n(t),l={root:[{name:"My library",href:"#"},{name:"Ranking",href:"#"},{name:"Quote",href:"#"},{name:"I'm Feeling Lucky",href:"#"}],user:[{name:"Profile",href:"#"},{name:"Settings",href:"#"},{name:"Logout",href:"#"}]},c=function(e){var n=e.toggleId;return(0,s.jsxs)("div",{className:"drawer-side",children:[(0,s.jsx)("label",{htmlFor:n,className:"drawer-overlay"}),(0,s.jsx)("ul",{className:"menu p-4 overflow-y-auto w-80 bg-base-200 text-base-content",children:l.root.map((function(e,n){return(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:e.href,children:(0,s.jsx)("a",{children:e.name})})},n)}))})]})},o=function(e){var n=e.toggleId;return(0,s.jsx)("label",{htmlFor:n,className:"btn btn-ghost btn-circle",children:(0,s.jsx)(a.r0I,{className:"h-6 w-6","aria-hidden":"true"})})},d=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"hidden md:block relative",children:[(0,s.jsx)(a.G4C,{className:"h-6 w-6 absolute top-3 left-3 text-gray-400"}),(0,s.jsx)("div",{className:"form-control",children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"input bg-base-300 text-xl w-96 pl-10"})})]}),(0,s.jsx)(i(),{href:"#",children:(0,s.jsx)("a",{className:"btn btn-ghost btn-circle md:hidden",children:(0,s.jsx)(a.G4C,{className:"h-6 w-6","aria-hidden":"true"})})})]})},u=r(2379),x=r.n(u),m=function(e){var n=e.href,r=e.src,a=e.children;return(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(i(),{href:null!==n&&void 0!==n?n:"/",children:(0,s.jsxs)("a",{className:"btn gap-1 btn-ghost normal-case",children:[(0,s.jsx)("span",{className:"sr-only",children:null!==a&&void 0!==a?a:"Logo"}),r?(0,s.jsx)(x(),{src:r,alt:"logo"}):null,(0,s.jsx)("h1",{className:"text-xl font-bold text-base-content",children:a})]})})})},h=r(8961),f=r(9461),j=r(2424),v=r(6747);function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,j.Z)("/users/".concat(e),n),a=(0,v.ZP)(s,r),t=a.data,i=a.error,l=(0,f.Z)(a,["data","error"]);return(0,h.Z)({user:t,isLoading:!i&&!t,isError:i},l)}var b,N=r(343),p=r(5744),w=function(){var e=g(1),n=e.user,r=e.isError,a=e.isLoading;return r?(0,s.jsx)("div",{className:"text-error",children:"Login Error"}):a?(0,s.jsx)(p.Z.Line,{className:"animate-pulse w-20 mr-4"}):n?(0,s.jsxs)("div",{className:"btn btn-link btn-xs text-base-content",children:["Hi!\xa0",(0,s.jsx)("b",{children:n.username})]}):(0,s.jsx)(i(),{href:"#",children:(0,s.jsx)("a",{className:"btn btn-link btn-xs",children:"Sign in / Sign up"})})},Z=function(){var e=g(1),n=e.user,r=e.isError,t=e.isLoading;return r?(0,s.jsx)(N.$Vt,{className:"w-6 h-6 text-error"}):t?(0,s.jsx)(N.H_P,{className:"animate-spin w-6 h-6"}):n?(0,s.jsx)(x(),{src:n.avatar,width:24,height:24,alt:"User avatar"}):(0,s.jsx)(a._K$,{className:"h-6 w-6","aria-hidden":"true"})},y=function(){return g(1).user?(0,s.jsx)("ul",{tabIndex:0,className:"menu menu-compact dropdown-content shadow bg-base-300 rounded-box w-52 mt-3 p-2 sm:mt-4 sm:p-0",children:l.user.map((function(e,n){return(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:e.href,children:(0,s.jsx)("a",{children:e.name})})},n)}))}):(0,s.jsx)(s.Fragment,{})},k=function(){return(0,s.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,s.jsx)("label",{tabIndex:0,className:"hidden sm:block normal-case",children:(0,s.jsx)(w,{})}),(0,s.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar sm:hidden",children:(0,s.jsx)("div",{className:"w-6 rounded-full",children:(0,s.jsx)(Z,{})})}),(0,s.jsx)(y,{})]})},L={src:"/_next/static/media/logo.251b33aa.svg",height:24,width:24},E=function(){return(0,s.jsxs)("div",{className:"hidden h-7 bg-black justify-between sm:flex","data-theme":"dracula",children:[(0,s.jsx)("nav",{className:"navbar min-h-0 flex-1",children:l.root.map((function(e,n){return(0,s.jsx)(i(),{href:e.href,children:(0,s.jsx)("a",{className:"btn btn-link btn-xs text-gray-400 hover:text-primary focus:text-primary-focus",children:e.name})},n)}))}),(0,s.jsx)("div",{className:"justify-end",children:(0,s.jsx)(k,{})})]})},I=function(){return(0,s.jsxs)("div",{className:"min-w-full",children:[(0,s.jsx)(E,{}),(0,s.jsx)("div",{className:"bg-inherit p-2 md:p-0 md:bg-base-300",children:(0,s.jsxs)("header",{className:"navbar p-0 m-auto rounded-md max-w-screen-lg bg-base-300 md:rounded-none",children:[(0,s.jsx)("div",{className:"navbar-start sm:hidden",children:(0,s.jsx)(o,{toggleId:"mobile-menu"})}),(0,s.jsx)("div",{className:"navbar-center sm:navbar-start",children:(0,s.jsx)(m,{src:L,children:"Bookworm"})}),(0,s.jsxs)("div",{className:"navbar-end",children:[(0,s.jsx)(d,{}),(0,s.jsx)("div",{className:"sm:hidden",children:(0,s.jsx)(k,{})})]})]})})]})},S=function(e){var n=e.time,r=e.author,a=(new Date).getFullYear();return(0,s.jsx)("footer",{className:"footer footer-center p-4 bg-base-300 text-base-content",children:(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["Copyright \xa9 ",n===a?a:"".concat(n," - ").concat(a),", All right reserved",r?" by ".concat(r):null,"."]})})})},P=function(e){var n=e.children;return(0,s.jsx)("div",{className:"flex flex-col min-h-screen min-w-full w-full",children:n})},F=function(e){var n=e.children;return(0,s.jsx)("main",{className:"flex-1 max-w-screen-lg w-full mx-auto p-6 md:p-4",children:n})},C=(Object.assign(P,{Main:F,Header:I,Footer:S}),b=P,function(e){return(0,s.jsxs)("div",{className:"drawer",children:[(0,s.jsx)("input",{id:e.toggleId,type:"checkbox",className:"drawer-toggle"}),(0,s.jsx)("div",{className:"drawer-content",children:(0,s.jsx)(b,{children:e.children})}),(0,s.jsx)(c,{toggleId:e.toggleId})]})}),O=function(e){var n=e.children;return(0,s.jsxs)(C,{toggleId:"mobile-menu",children:[(0,s.jsx)(I,{}),(0,s.jsx)(F,{children:n}),(0,s.jsx)(S,{time:2022,author:"Zheng Junyi"})]})}},9972:function(e,n,r){r.d(n,{Z:function(){return j}});var s=r(1527),a=r(2964),t=r(5744),i=r(8961),l=r(9461),c=r(2424),o=r(6747);var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,c.Z)("/tags",e),s=(0,o.ZP)(r,n),a=s.data,t=s.error,d=(0,l.Z)(s,["data","error"]);return(0,i.Z)({tags:a,isLoading:!t&&!a,isError:t},d)},u=r(6750),x=r(9493),m=r.n(x),h=function(e){var n=e.size,r=e.name,a=e.href;return(0,s.jsx)(m(),{href:a,children:(0,s.jsx)("a",{className:"btn btn-".concat(null!==n&&void 0!==n?n:"xs"," normal-case"),children:r})})},f=function(){return(0,s.jsx)(s.Fragment,{children:Array.from({length:4},(function(e,n){return(0,s.jsxs)(t.Z.Pulse,{className:"flex flex-col my-2 gap-2 mt-8",children:[(0,s.jsx)(t.Z.Circle,{className:"h-3 w-36 mb-2"}),(0,s.jsx)(t.Z.Line,{className:"w-48"}),(0,s.jsx)(t.Z.Line,{className:"w-48"}),(0,s.jsx)(t.Z.Line,{className:"w-48"})]},n)}))})},j=function(){var e=d(),n=e.tags,r=e.isLoading;return e.isError?(0,s.jsx)(a.Z.Error,{message:"Network Error!"}):(0,s.jsx)(u.Z,{title:"Tags",children:r?(0,s.jsx)(f,{}):Object.entries(n).map((function(e,n){var r;return(0,s.jsx)(u.Z.SubBox,{title:e[0],children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=e[1])||void 0===r?void 0:r.map((function(e,n){return(0,s.jsx)(h,{name:e.replace("-"," "),href:"/tags/".concat(e)},n)}))})},n)}))})}}}]);