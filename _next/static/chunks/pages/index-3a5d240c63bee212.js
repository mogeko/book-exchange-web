(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{638:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5604)}])},5604:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return D}});var s=r(1527),a=r(5967),t=r(9493),l=r.n(t),c={root:[{name:"My library",href:"#"},{name:"Ranking",href:"#"},{name:"Quote",href:"#"},{name:"I'm Feeling Lucky",href:"#"}],user:[{name:"Profile",href:"#"},{name:"Settings",href:"#"},{name:"Logout",href:"#"}]},i=function(e){var n=e.toggleId;return(0,s.jsxs)("div",{className:"drawer-side",children:[(0,s.jsx)("label",{htmlFor:n,className:"drawer-overlay"}),(0,s.jsx)("ul",{className:"menu p-4 overflow-y-auto w-80 bg-base-200 text-base-content",children:c.root.map((function(e,n){return(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:e.href,children:(0,s.jsx)("a",{children:e.name})})},n)}))})]})},o=function(e){var n=e.toggleId;return(0,s.jsx)("label",{htmlFor:n,className:"btn btn-ghost btn-circle",children:(0,s.jsx)(a.r0I,{className:"h-6 w-6","aria-hidden":"true"})})},d=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"hidden md:block relative",children:[(0,s.jsx)(a.G4C,{className:"h-6 w-6 absolute top-3 left-3 text-gray-400"}),(0,s.jsx)("div",{className:"form-control",children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"input bg-base-300 text-xl w-96 pl-10"})})]}),(0,s.jsx)(l(),{href:"#",children:(0,s.jsx)("a",{className:"btn btn-ghost btn-circle md:hidden",children:(0,s.jsx)(a.G4C,{className:"h-6 w-6","aria-hidden":"true"})})})]})},u=r(2379),x=r.n(u),h=function(e){var n=e.href,r=e.src,a=e.children;return(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(l(),{href:null!==n&&void 0!==n?n:"/",children:(0,s.jsxs)("a",{className:"btn gap-1 btn-ghost normal-case",children:[(0,s.jsx)("span",{className:"sr-only",children:null!==a&&void 0!==a?a:"Logo"}),r?(0,s.jsx)(x(),{src:r,alt:"logo"}):null,(0,s.jsx)("h1",{className:"text-xl font-bold text-base-content",children:a})]})})})},m=r(6747),j=r(4678);var f=function(e){return Object.entries(e).map((function(e){var n=(0,j.Z)(e,2),r=n[0],s=n[1];return"".concat(r,"=").concat(s)})).join("&")};function b(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n?"/users/".concat(e,"?").concat(f(n)):"/users/".concat(e),s=(0,m.ZP)(r),a=s.data,t=s.error;return{user:a,isLoading:!t&&!a,isError:t}}var v=r(343);function g(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.filter(Boolean).join(" ")}var N,p={Pulse:function(e){var n=e.children,r=e.className;return(0,s.jsx)("div",{className:g(r,"animate-pulse"),children:n})},Line:function(e){var n=e.className;return(0,s.jsx)("div",{className:g(n,"h-2 bg-slate-700 rounded")})},Square:function(e){var n=e.className;return(0,s.jsx)("div",{className:g(n,"bg-slate-700 rounded")})},Circle:function(e){var n=e.className;return(0,s.jsx)("div",{className:g(n,"bg-slate-700 rounded-full")})}},w=function(){var e=b(1),n=e.user,r=e.isError,a=e.isLoading;return r?(0,s.jsx)("div",{className:"text-error",children:"Login Error"}):a?(0,s.jsx)(p.Line,{className:"animate-pulse w-20 mr-4"}):n?(0,s.jsxs)("div",{className:"btn btn-link btn-xs text-base-content",children:["Hi!\xa0",(0,s.jsx)("b",{children:n.username})]}):(0,s.jsx)(l(),{href:"#",children:(0,s.jsx)("a",{className:"btn btn-link btn-xs",children:"Sign in / Sign up"})})},y=function(){var e=b(1),n=e.user,r=e.isError,t=e.isLoading;return r?(0,s.jsx)(v.$Vt,{className:"w-6 h-6 text-error"}):t?(0,s.jsx)(v.H_P,{className:"animate-spin w-6 h-6"}):n?(0,s.jsx)(x(),{src:n.avatar,width:24,height:24,alt:"User avatar"}):(0,s.jsx)(a._K$,{className:"h-6 w-6","aria-hidden":"true"})},k=function(){return b(1).user?(0,s.jsx)("ul",{tabIndex:0,className:"menu menu-compact dropdown-content shadow bg-base-300 rounded-box w-52 mt-3 p-2 sm:mt-4 sm:p-0",children:c.user.map((function(e,n){return(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:e.href,children:(0,s.jsx)("a",{children:e.name})})},n)}))}):(0,s.jsx)(s.Fragment,{})},I=function(){return(0,s.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,s.jsx)("label",{tabIndex:0,className:"hidden sm:block normal-case",children:(0,s.jsx)(w,{})}),(0,s.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar sm:hidden",children:(0,s.jsx)("div",{className:"w-6 rounded-full",children:(0,s.jsx)(y,{})})}),(0,s.jsx)(k,{})]})},_={src:"/_next/static/media/logo.251b33aa.svg",height:24,width:24},E=function(){return(0,s.jsxs)("div",{className:"hidden h-7 bg-black justify-between sm:flex","data-theme":"dracula",children:[(0,s.jsx)("nav",{className:"navbar min-h-0 flex-1",children:c.root.map((function(e,n){return(0,s.jsx)(l(),{href:e.href,children:(0,s.jsx)("a",{className:"btn btn-link btn-xs text-gray-400 hover:text-primary focus:text-primary-focus",children:e.name})},n)}))}),(0,s.jsx)("div",{className:"justify-end",children:(0,s.jsx)(I,{})})]})},L=function(){return(0,s.jsxs)("div",{className:"min-w-full",children:[(0,s.jsx)(E,{}),(0,s.jsx)("div",{className:"bg-inherit p-2 md:p-0 md:bg-base-300",children:(0,s.jsxs)("header",{className:"navbar p-0 m-auto rounded-md max-w-screen-lg bg-base-300 md:rounded-none",children:[(0,s.jsx)("div",{className:"navbar-start sm:hidden",children:(0,s.jsx)(o,{toggleId:"mobile-menu"})}),(0,s.jsx)("div",{className:"navbar-center sm:navbar-start",children:(0,s.jsx)(h,{src:_,children:"Bookworm"})}),(0,s.jsxs)("div",{className:"navbar-end",children:[(0,s.jsx)(d,{}),(0,s.jsx)("div",{className:"sm:hidden",children:(0,s.jsx)(I,{})})]})]})})]})},P=function(e){var n=e.time,r=e.author,a=(new Date).getFullYear();return(0,s.jsx)("footer",{className:"footer footer-center p-4 bg-base-300 text-base-content",children:(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["Copyright \xa9 ",n===a?a:"".concat(n," - ").concat(a),", All right reserved",r?" by ".concat(r):null,"."]})})})},S=function(e){var n=e.children;return(0,s.jsx)("div",{className:"flex flex-col min-h-screen min-w-full w-full",children:n})},Z=function(e){var n=e.children;return(0,s.jsx)("main",{className:"flex-1 max-w-screen-lg w-full mx-auto p-6 md:p-4",children:n})},B=(Object.assign(S,{Main:Z,Header:L,Footer:P}),N=S,function(e){return(0,s.jsxs)("div",{className:"drawer",children:[(0,s.jsx)("input",{id:e.toggleId,type:"checkbox",className:"drawer-toggle"}),(0,s.jsx)("div",{className:"drawer-content",children:(0,s.jsx)(N,{children:e.children})}),(0,s.jsx)(i,{toggleId:e.toggleId})]})}),C=function(e){var n=e.children;return(0,s.jsxs)(B,{toggleId:"mobile-menu",children:[(0,s.jsx)(L,{}),(0,s.jsx)(Z,{children:n}),(0,s.jsx)(P,{time:2022,author:"Zheng Junyi"})]})},F=r(8961),H=r(9461),G=function(e){var n=e.message,r=e.type,a=e.Icon;return(0,s.jsx)("div",{className:"alert alert-".concat(r," shadow-lg"),children:(0,s.jsxs)("div",{children:[(0,s.jsx)(a,{className:"w-6 h-6"}),(0,s.jsx)("span",{children:n})]})})},M={Error:function(e){return(0,s.jsx)(G,(0,F.Z)({type:"error",Icon:v.$Vt},e))},Warning:function(e){return(0,s.jsx)(G,(0,F.Z)({type:"warning",Icon:v.G5O},e))},Info:function(e){return(0,s.jsx)(G,(0,F.Z)({type:"info",Icon:v.h5X},e))},Success:function(e){return(0,s.jsx)(G,(0,F.Z)({type:"success",Icon:v.Mk_},e))}},O={Book:function(e){var n=e.title,r=e.cover,a=e.author,t=e.id;return(0,s.jsxs)("div",{className:"relative flex flex-col w-28",children:[(0,s.jsx)("figure",{className:"flex justify-center items-center",children:(0,s.jsx)(l(),{href:"/books/".concat(t),children:(0,s.jsx)("a",{className:"relative w-full h-[calc(7rem/2*3)]",children:(0,s.jsx)(x(),{src:r,layout:"fill",alt:n})})})}),(0,s.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,s.jsx)(l(),{href:"/books/".concat(t),children:(0,s.jsx)("a",{className:"link no-underline text-primary hover:bg-primary hover:text-primary-content focus:bg-primary-focus focus:text-primary-content",children:(0,s.jsx)("h2",{className:"truncate",children:n})})}),(0,s.jsx)("p",{className:"truncate",children:a})]})]})},BookSkeleton:function(){return(0,s.jsxs)(p.Pulse,{className:"relative flex flex-col mb-4 w-28",children:[(0,s.jsx)(p.Square,{className:"mb-2 w-28 h-[calc(7rem/2*3)]"}),(0,s.jsx)(p.Line,{className:"mb-2 w-24"}),(0,s.jsx)(p.Line,{className:"mb-2 w-20"})]})}},A=r(1284),R=function(e){var n=e.length,r=e.setIndex,a=e.index,t=function(e){r(Number(e.currentTarget.value))};return n>1?(0,s.jsxs)("div",{className:"btn-group",children:[(0,s.jsx)("button",{className:"btn btn-xs",onClick:function(){return r((function(){return Math.max(0,a-1)}))},children:(0,s.jsx)(A._HF,{})}),Array.from({length:n},(function(e,n){return(0,s.jsx)("button",{className:"btn btn-xs"+(a===n?" btn-active":""),onClick:t,value:n,children:n+1},n)})),(0,s.jsx)("button",{className:"btn btn-xs",onClick:function(){return r((function(){return Math.min(n-1,a+1)}))},children:(0,s.jsx)(A.PS5,{})})]}):(0,s.jsx)(s.Fragment,{})};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e?"/books?".concat(f(e)):"/books",r=(0,m.ZP)(n),s=r.data,a=r.error;return{books:s,isLoading:!a&&!s,isError:a}},X=Object.assign((function(e){var n=e.children;return(0,s.jsx)("div",{className:"flex flex-col items-center mb-14",children:n})}),{Header:function(e){var n=e.children;return(0,s.jsx)("h1",{className:"text-3xl w-full p-1",children:n})},GridBooks:function(e){var n,r=e.pageIndex,a=void 0===r?0:r,t=(0,H.Z)(e,["pageIndex"]),l=T(t),c=l.books,i=l.isError,o=l.isLoading,d=Array.from({length:Math.ceil(t.limit/10)},(function(e,n){return null===c||void 0===c?void 0:c.slice(10*n,10*(n+1))}));return(0,s.jsxs)("div",{className:"flex flex-wrap gap-6 my-8 w-full",children:[i&&(0,s.jsx)(M.Error,{message:"Network Error!"}),o?Array.from({length:10},(function(e,n){return(0,s.jsx)(O.BookSkeleton,{},n)})):null===(n=d[a])||void 0===n?void 0:n.map((function(e,n){return(0,s.jsx)(O.Book,(0,F.Z)({},e),n)}))]})},Pagination:R}),$=X,q=r(959),U=function(){var e=(0,q.useState)(0),n=e[0],r=e[1];return(0,s.jsxs)($,{children:[(0,s.jsx)($.Header,{children:"Recently Popular"}),(0,s.jsx)($.GridBooks,{pageIndex:n,limit:50}),(0,s.jsx)($.Pagination,{index:n,setIndex:r,length:5})]})},V=function(){return(0,s.jsxs)($,{children:[(0,s.jsx)($.Header,{children:"Unpopular but Highly Rated"}),(0,s.jsx)($.GridBooks,{limit:5})]})},D=function(){return(0,s.jsxs)(C,{children:[(0,s.jsx)("div",{className:"flex max-w-[43rem]",children:(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[(0,s.jsx)(U,{}),(0,s.jsx)(V,{})]})}),(0,s.jsx)("div",{className:"flex w-full"})]})}}},function(e){e.O(0,[733,117,154,866,774,888,179],(function(){return n=638,e(e.s=n);var n}));var n=e.O();_N_E=n}]);